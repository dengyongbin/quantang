package com.quantang.dao.impl;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.jdbc.core.JdbcTemplate;
import org.springframework.stereotype.Repository;

import com.quantang.dao.FirmAccountDao;

@Repository
public class FirmAccountDaoImpl implements FirmAccountDao {

	@Autowired
	private JdbcTemplate jdbc;

	@Override
	public String SaveProtocol(String[] param) {
		StringBuffer maxSQL = new StringBuffer("");
		StringBuffer insertSQL = new StringBuffer("");
		maxSQL.append("select ifnull(max(protocolId),0)+1 from protocol;");
		insertSQL.append("insert into protocol(protocolId,name,address,phone,fax) values(?,?,?,?,?)");
		int protocolId = jdbc.queryForInt(maxSQL.toString());
		jdbc.update(insertSQL.toString(), new Object[] { protocolId, param[0], param[1], param[2], param[3] });
		return String.valueOf(protocolId);
	}
}
